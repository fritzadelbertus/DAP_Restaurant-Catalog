{"version":3,"file":"140.bundle.js","mappings":";yVACA,kxNAqDA,QAtD2B,CACnBA,KAAI,YAAuC,wHAIC,OAJrCC,EAAkB,EAAlBA,mBAAoBC,EAAY,EAAZA,aAC/B,EAAKC,oBAAsBF,EAC3B,EAAKG,cAAgBF,EACrB,EAAKG,WAAa,eAClB,EAAKC,cAAgB,IAAIC,MAAM,EAAKF,YAAY,SACX,6BAAwC,OAAlD,OAArBG,EAAwB,EAAH,uBACFA,EAAsBC,iBAAiB,EAAKL,eAAc,QAAnE,GACG,QADbM,EAAa,EAAH,MACO,oEACDA,EAAWC,gBAAe,QAAhD,EAAKC,SAAW,EAAH,KACb,EAAKC,mBACL,EAAKC,qBAAqB,2CAVqB,EAWjD,EAEAD,iBAAgB,WAAG,WACEE,KAAKZ,oBAAoBa,cAAc,QAC/CC,iBAAiB,UAAU,SAACC,GACrCA,EAAMC,iBACN,EAAKC,aACP,GACF,EAEMN,mBAAkB,WAAG,4HACnB,kCAA+C,OACrD,EAAKX,oBAAoBc,iBAAiB,EAAKZ,YAAY,WACzD,IAAMgB,EAAmBC,SAASC,cAAc,qBAChDF,EAAiBG,QAAU,EAAKZ,SAChC,EAAKT,oBAAoBsB,YAAY,EAAKtB,oBAAoBuB,WAC9D,EAAKvB,oBAAoBwB,YAAYN,GACrC,EAAKR,kBACP,IAAG,0CARsB,EAS3B,EAEMO,YAAW,WAAG,0HAEyD,GADrEQ,EAAYN,SAASN,cAAc,yBAAyBa,MAC5DC,EAAcR,SAASN,cAAc,2BAA2Ba,MACjED,EAAUG,QAAWD,EAAYC,OAAM,gBACV,OAAhCC,QAAQC,MAAM,kBAAkB,0BAOjC,OAJKC,EAAW,CACfC,GAAI,EAAK/B,cACTgC,KAAMR,EACNS,OAAQP,GACT,SAEyB,6BAA6B,OAAvC,OAAVQ,EAAa,EAAH,uBACOA,EAAWC,KAAKL,GAAS,QAAlC,GACG,QADXM,EAAW,EAAH,MACO,oEACCA,EAAS7B,gBAAe,QAA9C,EAAKC,SAAW,EAAH,KACb,EAAKT,oBAAoBsC,cAAc,EAAKnC,eAAe,2CAjBzC,EAkBpB","sources":["webpack://lagi-laper/./src/scripts/utils/review-box-initiator.js"],"sourcesContent":["const ReviewBoxInitiator = {\n  async init({ reviewBoxContainer, restaurantId }) {\n    this._reviewBoxContainer = reviewBoxContainer;\n    this._restaurantId = restaurantId;\n    this._event_key = 'REVIEW-EVENT';\n    this._REVIEW_EVENT = new Event(this._event_key);\n    const RestaurantsDataSource = (await import('../data/restaurants-datasource')).default;\n    const restaurant = await RestaurantsDataSource.restaurantDetail(this._restaurantId);\n    if (restaurant === null) return;\n    this._reviews = await restaurant.customerReviews;\n    this._addFormListener();\n    this._addReviewListener();\n  },\n\n  _addFormListener() {\n    const submitForm = this._reviewBoxContainer.querySelector('form');\n    submitForm.addEventListener('submit', (event) => {\n      event.preventDefault();\n      this._postReview();\n    });\n  },\n\n  async _addReviewListener() {\n    await import('../views/components/restaurant-review');\n    this._reviewBoxContainer.addEventListener(this._event_key, () => {\n      const restaurantReview = document.createElement('restaurant-review');\n      restaurantReview.reviews = this._reviews;\n      this._reviewBoxContainer.removeChild(this._reviewBoxContainer.lastChild);\n      this._reviewBoxContainer.appendChild(restaurantReview);\n      this._addFormListener();\n    });\n  },\n\n  async _postReview() {\n    const nameInput = document.querySelector('#input_reviewer__name').value;\n    const reviewInput = document.querySelector('#input_reviewer__review').value;\n    if (!nameInput.trim() || !reviewInput.trim()) {\n      console.error('Invalid Inputs');\n      return;\n    }\n    const postData = {\n      id: this._restaurantId,\n      name: nameInput,\n      review: reviewInput,\n    };\n\n    const PostReview = (await import('../data/post-review')).default;\n    const response = await PostReview.post(postData);\n    if (response === null) return;\n    this._reviews = await response.customerReviews;\n    this._reviewBoxContainer.dispatchEvent(this._REVIEW_EVENT);\n  },\n};\n\nexport default ReviewBoxInitiator;\n"],"names":["init","reviewBoxContainer","restaurantId","_reviewBoxContainer","_restaurantId","_event_key","_REVIEW_EVENT","Event","RestaurantsDataSource","restaurantDetail","restaurant","customerReviews","_reviews","_addFormListener","_addReviewListener","this","querySelector","addEventListener","event","preventDefault","_postReview","restaurantReview","document","createElement","reviews","removeChild","lastChild","appendChild","nameInput","value","reviewInput","trim","console","error","postData","id","name","review","PostReview","post","response","dispatchEvent"],"sourceRoot":""}